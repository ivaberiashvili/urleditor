<!DOCTYPE html>
<html>
<head>
  <title>Real-time URL Colorizer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f0f0f0;
      max-width: 1280px;
      margin: 0 auto;
    }
    .container {
      display: flex;
      gap: 20px;
      margin-top: 20px;
      align-items: flex-start; /* Each column resizes independently */
    }
    .column {
      flex: 1;
      box-sizing: border-box;
      background-color: white;
      padding: 15px;
      border-radius: 5px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    h2 {
      margin-top: 0;
      color: #333;
    }
    label {
      font-size: 0.9em;
      margin-bottom: 6px;
      display: inline-block;
    }
    /* Textarea styles */
    textarea {
      display: block;
      width: 100%;
      min-height: 200px;
      overflow-x: hidden;
      overflow-y: auto;
      white-space: pre-wrap;
      word-wrap: break-word;
      overflow-wrap: break-word;
      word-break: break-word;
      box-sizing: border-box;
      font-family: Arial, sans-serif;
      font-size: 16px;
      padding: 8px;
      margin-bottom: 20px;
      border: 1px solid #ddd;
      border-radius: 4px;
      resize: vertical;
    }
    .output {
      min-height: 200px;
      white-space: pre-wrap;
      word-wrap: break-word;
      overflow-wrap: break-word;
      word-break: break-word;
      box-sizing: border-box;
      border: 1px solid #ddd;
      border-radius: 4px;
      margin-bottom: 20px;
      padding: 8px;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h1>URL Colorizer</h1>
  <div class="container">
    <div class="column">
      <h2>Clicks</h2>
      <label for="clicksInput">Input</label>
      <textarea id="clicksInput" placeholder="Paste URL here..."></textarea>
      <label for="clicksOutput">Output</label>
      <div id="clicksOutput" class="output"></div>
    </div>
    <div class="column">
      <h2>Impressions</h2>
      <label for="impressionsInput">Input</label>
      <textarea id="impressionsInput" placeholder="Paste URL here..."></textarea>
      <label for="impressionsOutput">Output</label>
      <div id="impressionsOutput" class="output"></div>
    </div>
  </div>

  <script>
    // Color rules—if a path segment exactly matches one of these keys,
    // that segment will be wrapped in a span with the specified color.
    const colorRules = {
      "home": "green",
      "about": "blue",
      "contact": "red"
    };

    // This function builds a document fragment by creating text nodes
    // (and colored span elements) so that every character is preserved.
    function colorizeUrl(url) {
      const fragment = document.createDocumentFragment();
      if (!url) return fragment;
      
      try {
        // Try to parse the URL
        const urlObj = new URL(url);
        
        // Add the protocol and host (e.g. "http://example.com")
        fragment.appendChild(document.createTextNode(urlObj.protocol + '//' + urlObj.host));
        
        // Process the pathname (the part after the host)
        // For example, if the pathname is "/home/about", we want to treat each segment.
        // Split on '/'—the first element will be an empty string because the path starts with '/'
        const segments = urlObj.pathname.split('/');
        for (let i = 0; i < segments.length; i++) {
          // Insert a slash between segments (or at the beginning)
          if (i > 0) {
            fragment.appendChild(document.createTextNode('/'));
          }
          const segment = segments[i];
          if (segment) {
            // If this segment matches one of our color rules,
            // create a span element with that color.
            if (colorRules.hasOwnProperty(segment)) {
              const span = document.createElement("span");
              span.style.color = colorRules[segment];
              span.textContent = segment; // Use textContent to preserve all characters
              fragment.appendChild(span);
            } else {
              // Otherwise, just append the segment as a text node.
              fragment.appendChild(document.createTextNode(segment));
            }
          }
        }
        
        // Append the query string (if present)
        if (urlObj.search) {
          fragment.appendChild(document.createTextNode(urlObj.search));
        }
        
        // Append the hash fragment (if present)
        if (urlObj.hash) {
          fragment.appendChild(document.createTextNode(urlObj.hash));
        }
        
        return fragment;
      } catch (e) {
        // If URL parsing fails, simply return the original URL as text.
        fragment.appendChild(document.createTextNode(url));
        return fragment;
      }
    }

    // Auto-resize the textarea height based on content
    function autoResize(elem) {
      elem.style.height = 'auto';         // Reset the height
      elem.style.height = elem.scrollHeight + 'px'; // Set it to the new content height
    }

    // Grab references to our textareas and output containers
    const clicksInput = document.getElementById('clicksInput');
    const impressionsInput = document.getElementById('impressionsInput');
    const clicksOutput = document.getElementById('clicksOutput');
    const impressionsOutput = document.getElementById('impressionsOutput');

    // Update output and auto-resize on user input
    clicksInput.addEventListener('input', function() {
      autoResize(this);
      clicksOutput.innerHTML = ''; // Clear previous content
      clicksOutput.appendChild(colorizeUrl(this.value));
    });
    
    impressionsInput.addEventListener('input', function() {
      autoResize(this);
      impressionsOutput.innerHTML = '';
      impressionsOutput.appendChild(colorizeUrl(this.value));
    });
  </script>
</body>
</html>